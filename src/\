<template>
  <!-- Don't drop "q-app" class -->
  <div>
    {{ name }}
    <input v-model:alarm="alarm" type="time"></input>
    <button v-on:click="initAlarm">Start Alarm</button>
  </div>
</template>

<script>
import AudioStream from './AudioStream'
export default {
  name: 'alarm',
  components: { AudioStream },
  props: ['time', 'name', 'procedures'],
  data () {
    return {
      alarm: null
    }
  },
  methods: {
    checkAlarm: function () {
      if (this.time !== this.alarm) {
        console.log('check')
        for (var proc in this.procedures) {
          console.log('trigger')
          proc.trigger()
        }
      }
    },
    initAlarm: function () {
      this.checkAlarm()
      setInterval(this.checkAlarm, 1000)
    }
  }
}
</script>

<style></style>
